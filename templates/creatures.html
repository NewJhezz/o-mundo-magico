{% extends "base.html" %}

{% block title %}Criaturas M√°gicas | Wiki{% endblock %}

{% block content %}
<div class="creatures-section animate-fade-in">
    <!-- Navbar interna de Criaturas (se houver subcategorias no futuro) -->
    <div class="header-decoration">
        <h2
            style="text-align: center; color: var(--gold-primary); font-family: var(--font-heading); margin-bottom: 2rem;">
            Besti√°rio do Mundo M√°gico
        </h2>
    </div>

    <!-- Toolbar de Filtros -->
    <div class="filter-toolbar">
        <div class="filter-group">
            <span class="filter-label">Classifica√ß√£o (M.O.M.):</span>
            <select id="filterCategory" class="custom-select" onchange="updateCreatures()">
                <option value="all">Todas</option>
                <option value="beast">Feras (Beasts) üêæ</option>
                <option value="being">Seres (Beings) üó£Ô∏è</option>
                <option value="spirit">Esp√≠ritos (Spirits) üëª</option>
            </select>
        </div>

        <div class="filter-group">
            <span class="filter-label">Periculosidade:</span>
            <select id="filterDanger" class="custom-select" onchange="updateCreatures()">
                <option value="all">Todas</option>
                <option value="XXXXX">XXXXX (Mortal ‚ò†Ô∏è)</option>
                <option value="XXXX">XXXX (Perigoso)</option>
                <option value="XXX">XXX (Quase Perigoso üòÖ)</option>
                <option value="XX">XX (Inofensivo)</option>
                <option value="X">X (Tediante)</option>
            </select>
        </div>
    </div>

    <!-- Grid de Criaturas -->
    <div id="creaturesGrid" class="woods-grid">
        {% for creature in creatures %}
        <div class="wood-card creature-card {{ creature.category }}" data-category="{{ creature.category }}"
            data-danger="{{ creature.danger }}">

            <div class="card-header creature-header">
                <span class="mini-icon">{{ creature.icon }}</span>
                <div class="header-text">
                    <h3 class="wood-name">{{ creature.name }}</h3>
                    <div class="danger-stars" title="Periculosidade: {{ creature.danger }}">
                        {% for i in range(creature.danger_level) %}‚≠ê{% endfor %}
                    </div>
                </div>
            </div>

            <div class="creature-body">
                <p class="creature-label">{{ creature.category_label }}</p>
                <p class="creature-desc">{{ creature.desc }}</p>
                <div class="creature-origin-wrapper">
                    <p class="creature-origin"><strong>Origem:</strong> {{ creature.origin }}</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Bot√£o Voltar para Dashboard (No rodap√© tamb√©m) -->
    <div style="text-align: center; margin-top: 3rem;">
        <a href="{{ url_for('world') }}" class="tab-link back-btn">
            ‚¨Ö Voltar ao Mundo
        </a>
    </div>
</div>

<script>
    function updateCreatures() {
        const catFilter = document.getElementById('filterCategory').value;
        const dangerFilter = document.getElementById('filterDanger').value;
        const grid = document.getElementById('creaturesGrid');
        const cards = Array.from(grid.getElementsByClassName('creature-card'));

        cards.forEach(card => {
            const cardCat = card.dataset.category;
            const cardDanger = card.dataset.danger;

            let show = true;

            if (catFilter !== 'all' && cardCat !== catFilter) show = false;
            // Filtro de perigo exato (pode ser melhorado para 'pelo menos X')
            // Por enquanto, match exato para simplificar a UI
            if (dangerFilter !== 'all' && cardDanger !== dangerFilter) show = false;

            card.style.display = show ? 'flex' : 'none';
        });
    }
</script>

<style>
    /* Estilos Espec√≠ficos para Criaturas */
    .creature-header {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        min-height: 50px;
    }

    .creature-header .mini-icon {
        position: absolute;
        left: 0;
    }

    .header-text {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .danger-stars {
        font-size: 0.9rem;
        margin-top: 0.2rem;
        color: #FFD700;
        letter-spacing: 2px;
    }

    .creature-body {
        font-size: 0.9rem;
        color: var(--text-muted);
        text-align: center;
        margin-top: 1rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        flex: 1;
        /* Ocupa o espa√ßo para empurrar a origem */
    }

    .creature-label {
        font-weight: bold;
        color: var(--gold-primary);
        text-transform: uppercase;
        font-size: 0.75rem;
    }

    .creature-origin-wrapper {
        margin-top: auto;
        width: 100%;
        padding-top: 0.5rem;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    .creature-origin {
        font-size: 0.8rem;
    }

    /* Cores por Categoria */
    .wood-card.beast {
        border-color: #cd853f;
    }

    /* Marrom Fera */
    .wood-card.being {
        border-color: #87ceeb;
    }

    /* Azul Ser */
    .wood-card.spirit {
        border-color: #e6e6fa;
    }

    /* Fantasma P√°lido */
</style>
{% endblock %}