<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aventuras M√°gicas | O Mundo M√°gico</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="./static/css/style.css">
</head>

<body>
    <div class="magic-particles" id="particles"></div>

    <div class="container">
        
        <header class="main-header">
            <h1><a href="./index.html" style="text-decoration: none; color: inherit;">O Mundo M√°gico</a></h1>
        </header>
        

        <main>
            
<div class="hero-section">
    <a href="./index.html" class="back-link">‚Üê Voltar para o Mundo</a>
    <h1 class="main-title">Livro-Jogo: Aventuras</h1>
    <p class="hero-subtitle">Suas escolhas definem seu destino no universo bruxo.</p>
</div>

<div id="game-container" class="adventure-wrapper">
    <!-- Tela de Biblioteca (Estante) -->
    <div id="library-screen" class="scroll-container library-view">
        <h2 class="library-title">Sua Cole√ß√£o de Rel√≠quias</h2>
        <div class="bookshelf">
            <div class="shelf-row">
                <!-- Livro 1 -->
                <!-- Livro 1 -->
                <div class="book-card" onclick="showIntro('lago_negro')">
                    <div class="book-inner">
                        <div class="book-front">
                            <img src="./static/img/adventure/lago_negro_cover.png"
                                alt="O Mist√©rio do Lago Negro">
                            <div class="book-frame"></div>
                        </div>
                        <div class="book-spine"></div>
                    </div>
                    <div class="book-labels">
                        <h3>O Mist√©rio do Lago Negro</h3>
                        <span class="book-status">Pronto para Ler</span>
                    </div>
                </div>

                <!-- Livro 2 -->
                <!-- Livro 2 -->
                <div class="book-card" onclick="showIntro('biblioteca_proibida')">
                    <div class="book-inner">
                        <div class="book-front">
                            <img src="./static/img/adventure/biblioteca_proibida_cover.png"
                                alt="Enigmas da Biblioteca Proibida">
                            <div class="book-frame"></div>
                        </div>
                        <div class="book-spine"></div>
                    </div>
                    <div class="book-labels">
                        <h3>Enigmas da Biblioteca Proibida</h3>
                        <span class="book-status">Pronto para Ler</span>
                    </div>
                </div>

                <!-- Livro 3 (Fantasma de Azkaban) -->
                <div class="book-card" onclick="showIntro('fantasma_azkaban')">
                    <div class="book-inner">
                        <div class="book-front">
                            <img src="./static/img/adventure/fantasma_azkaban_cover.png"
                                alt="O Fantasma de Azkaban">
                            <div class="book-frame"></div>
                        </div>
                        <div class="book-spine"></div>
                    </div>
                    <div class="book-labels">
                        <h3>O Fantasma de Azkaban</h3>
                        <span class="book-status">Pronto para Ler</span>
                    </div>
                </div>

                <!-- Livro 4 (Sombras de Hogwarts) -->
                <div class="book-card" onclick="showIntro('sombras_hogwarts')">
                    <div class="book-inner">
                        <div class="book-front">
                            <img src="./static/img/adventure/sombras_hogwarts_cover.png"
                                alt="Sombras de Hogwarts">
                            <div class="book-frame"></div>
                        </div>
                        <div class="book-spine"></div>
                    </div>
                    <div class="book-labels">
                        <h3>Sombras de Hogwarts</h3>
                        <span class="book-status">Pronto para Ler</span>
                    </div>
                </div>

                <!-- Livro 5 (Herpo 1) -->
                <div class="book-card locked">
                    <div class="book-inner">
                        <div class="book-front">
                            <img src="./static/img/adventure/herpo_1_cover.jpg"
                                alt="O Eco de Herpo, o Sujo - Parte 1">
                            <div class="book-frame"></div>
                            <div class="lock-icon">üîí</div>
                        </div>
                        <div class="book-spine"></div>
                    </div>
                    <div class="book-labels">
                        <h3>Herpo, o Sujo ‚Äì Parte 1</h3>
                        <span class="book-status">Em breve...</span>
                    </div>
                </div>

                <!-- Livro 4 (Herpo 2) -->
                <div class="book-card locked">
                    <div class="book-inner">
                        <div class="book-front">
                            <img src="./static/img/adventure/herpo_2_cover.jpg"
                                alt="O Eco de Herpo, o Sujo - Parte 2">
                            <div class="book-frame"></div>
                            <div class="lock-icon">üîí</div>
                        </div>
                        <div class="book-spine"></div>
                    </div>
                    <div class="book-labels">
                        <h3>Herpo, o Sujo ‚Äì Parte 2</h3>
                        <span class="book-status">Em breve...</span>
                    </div>
                </div>
            </div>
            <div class="shelf-plank"></div>
        </div>
    </div>

    <!-- Tela de Introdu√ß√£o Geral (Din√¢mica) -->
    <div id="intro-screen" class="scroll-container setup-view hidden">
        <h2 id="intro-title" class="section-title">A Jornada Come√ßa</h2>
        <div class="adventure-intro-text">
            <p id="intro-description"
                style="font-size: 1.2rem; line-height: 1.8; color: var(--text-main); margin-bottom: 2rem;"></p>
        </div>
        <button class="choice-btn" style="margin: 2rem auto; justify-content: center; width: auto;"
            onclick="showSelection()">INICIAR AVENTURA</button>
    </div>

    <!-- Tela de Sele√ß√£o Inicial (Din√¢mica) -->
    <div id="setup-screen" class="scroll-container setup-view hidden">
        <h2 class="section-title">Escolha seu Personagem</h2>
        <div id="character-selection" class="character-selection">
            <!-- Gerado via JS -->
        </div>
    </div>

    <!-- Interface Principal do Jogo -->
    <div id="game-screen" class="game-view hidden">
        <div class="adventure-main-layout">
            <aside class="game-sidebar">
                <div class="inventory-card">
                    <h3>üìú Invent√°rio</h3>
                    <ul id="inventory-list"></ul>
                    <div class="galleons-display">
                        üí∞ Gale√µes: <span id="galleon-count">0</span>
                    </div>
                    <div id="strength-display" class="strength-display hidden"
                        style="margin-top: 1rem; color: #00d4ff; text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);">
                        ‚ùÑÔ∏è For√ßa Interior: <span id="strength-count">0</span>/6
                    </div>
                </div>
            </aside>
            <main class="story-area">
                <div class="scroll-content parchment">
                    <div id="section-content" class="story-text"></div>
                    <div id="choices-container" class="choices-list"></div>
                </div>
            </main>
        </div>
    </div>
</div>

<style>
    /* ... Estilos permanecem os mesmos ... */
    .adventure-wrapper {
        max-width: 1000px;
        margin: 2rem auto;
        min-height: 600px;
    }

    .setup-view {
        background: rgba(8, 16, 30, 0.4);
        padding: 3rem;
        border-radius: 20px;
        border: var(--glass-border);
        backdrop-filter: blur(10px);
        text-align: center;
    }

    .character-selection {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin: 3rem 0;
        flex-wrap: wrap;
    }

    .char-box {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(212, 175, 55, 0.2);
        padding: 2rem;
        border-radius: 15px;
        cursor: pointer;
        transition: all 0.3s;
        width: 220px;
    }

    .char-box:hover {
        background: rgba(212, 175, 55, 0.1);
        border-color: var(--gold-primary);
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    .char-icon {
        font-size: 3.5rem;
        display: block;
        margin-bottom: 1rem;
    }

    .char-box h3 {
        color: var(--gold-primary);
        margin-bottom: 0.5rem;
    }

    .adventure-main-layout {
        display: grid;
        grid-template-columns: 280px 1fr;
        gap: 2rem;
    }

    .inventory-card {
        background: rgba(10, 20, 35, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 1.5rem;
        border-radius: 15px;
        backdrop-filter: blur(10px);
    }

    .inventory-card h3 {
        font-family: var(--font-heading);
        color: var(--gold-secondary);
        font-size: 1.1rem;
        margin-bottom: 1rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        padding-bottom: 0.5rem;
    }

    #inventory-list {
        list-style: none;
        padding: 0;
        margin-bottom: 1.5rem;
    }

    #inventory-list li {
        padding: 0.5rem 0;
        font-size: 0.85rem;
        color: var(--text-muted);
        border-bottom: 1px solid rgba(255, 255, 255, 0.02);
    }

    .galleons-display {
        font-family: var(--font-heading);
        color: var(--gold-primary);
        font-weight: bold;
    }

    /* Estilos da Estante M√°gica */
    .library-view {
        padding: 4rem 2rem;
        text-align: center;
        background: radial-gradient(circle at center, rgba(16, 28, 50, 0.4) 0%, transparent 70%);
    }

    .library-title {
        font-family: var(--font-heading);
        font-size: 2.5rem;
        color: var(--gold-primary);
        text-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
        margin-bottom: 4rem;
        letter-spacing: 3px;
    }

    .bookshelf {
        position: relative;
        perspective: 1500px;
        margin-bottom: 5rem;
    }

    .shelf-row {
        display: flex;
        justify-content: center;
        gap: 2.5rem;
        flex-wrap: wrap;
        padding-bottom: 2rem;
        position: relative;
        z-index: 2;
    }

    .shelf-plank {
        height: 25px;
        background: linear-gradient(to bottom, #3d2b1f, #1e130c);
        border-bottom: 3px solid #1a0f08;
        border-radius: 4px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
        width: 110%;
        margin-left: -5%;
        margin-top: -10px;
        position: relative;
        z-index: 1;
    }

    .book-card {
        width: 200px;
        cursor: pointer;
        transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        text-align: center;
        position: relative;
    }

    .book-inner {
        position: relative;
        width: 100%;
        aspect-ratio: 1 / 1.5;
        transform-style: preserve-3d;
        transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    .book-card:hover .book-inner {
        transform: rotateY(-25deg) translateZ(50px);
    }

    .book-front {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 4px;
        overflow: hidden;
        z-index: 2;
    }

    .book-front img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .book-frame {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: 10px solid transparent;
        border-image: url('https://www.transparenttextures.com/patterns/dark-leather.png') 30 stretch;
        outline: 2px solid var(--gold-primary);
        outline-offset: -8px;
        box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.5);
        pointer-events: none;
    }

    .book-spine {
        position: absolute;
        top: 0;
        left: -15px;
        width: 30px;
        height: 100%;
        background: #2a1b12;
        transform: rotateY(90deg);
        transform-origin: right;
        box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.8);
        z-index: 1;
    }

    .book-labels {
        margin-top: 2rem;
        transition: all 0.3s;
    }

    .book-labels h3 {
        font-size: 1rem;
        color: #fff;
        margin-bottom: 0.5rem;
        font-family: var(--font-heading);
        min-height: 2.4rem;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .book-status {
        font-size: 0.75rem;
        color: var(--gold-primary);
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: bold;
        opacity: 0.8;
    }

    /* Cadeado e Locked State */
    .book-card.locked {
        cursor: not-allowed;
        filter: sepia(0.5) contrast(0.8) brightness(0.7);
    }

    .book-card.locked:hover .book-inner {
        transform: none;
    }

    .lock-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 3rem;
        color: rgba(255, 255, 255, 0.8);
        text-shadow: 0 0 20px black;
        z-index: 5;
    }

    .book-card:not(.locked):hover .book-labels h3 {
        color: var(--gold-primary);
    }

    .parchment {
        background: rgba(10, 15, 25, 0.7);
        border: 2px solid var(--gold-primary);
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.8), inset 0 0 50px rgba(214, 186, 139, 0.05);
        padding: 3rem;
        border-radius: 10px;
        min-height: 400px;
        position: relative;
    }

    .story-text {
        font-size: 1.1rem;
        line-height: 1.8;
        color: var(--text-main);
        margin-bottom: 3rem;
        text-align: justify;
    }

    .choices-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .choice-btn {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(212, 175, 55, 0.3);
        padding: 1rem 1.5rem;
        border-radius: 8px;
        color: #fff;
        text-align: left;
        cursor: pointer;
        transition: all 0.3s;
        font-family: var(--font-body);
        font-size: 0.95rem;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .choice-btn:hover:not(.disabled) {
        background: rgba(212, 175, 55, 0.15);
        border-color: var(--gold-primary);
        transform: translateX(10px);
    }

    .choice-btn.disabled {
        opacity: 0.5;
        cursor: not-allowed;
        border-color: rgba(255, 0, 0, 0.2);
    }

    .req-hint {
        font-size: 0.8rem;
        color: #ff4444;
        margin-left: auto;
    }

    .end-btn {
        background: var(--gold-primary);
        color: #000;
        font-weight: bold;
        text-transform: uppercase;
        margin-top: 2rem;
    }

    .hidden {
        display: none !important;
    }

    /* --- RESPONSIVIDADE MOBILE --- */
    @media (max-width: 768px) {
        .adventure-wrapper {
            margin: 1rem auto;
            padding: 0 10px;
        }

        .setup-view {
            padding: 1.5rem;
        }

        .adventure-main-layout {
            grid-template-columns: 1fr;
            /* Muda para coluna √∫nica */
            gap: 1.5rem;
        }

        .game-sidebar {
            order: 2;
            /* Coloca o invent√°rio abaixo da hist√≥ria no mobile */
        }

        .story-area {
            order: 1;
        }

        .parchment {
            padding: 1.5rem;
            min-height: auto;
        }

        .story-text {
            font-size: 1rem;
            margin-bottom: 2rem;
        }

        .library-title {
            font-size: 1.8rem;
            margin-bottom: 2rem;
        }

        .char-box {
            width: 100%;
            /* Personagens ocupam largura total */
            padding: 1.5rem;
        }

        .choice-btn {
            padding: 1.2rem;
            /* Bot√µes maiores para toque */
            font-size: 1rem;
        }
    }
</style>

<script>
    const allAdventures = {
        'lago_negro': {
            title: "O Mist√©rio do Lago Negro",
            description: "Voc√™ √© um(a) bruxo(a) comum que trabalha como herbologista em Hogsmeade, vivendo no universo de Harry Potter. O objetivo √© investigar o mist√©rio das luzes estranhas no Lago Negro, que est√£o atraindo criaturas aqu√°ticas para o perigo, e impedir um antigo feiti√ßo amaldi√ßoado de se espalhar para Hogwarts.",
            characters: [
                { id: 'amelia', name: 'Amelia Blackwood', title: 'Bruxa Herbologista', icon: 'üßô‚Äç‚ôÄÔ∏è', initialGalleons: 15, initialInventory: ['Varinha (Salgueiro)', 'Capa imperme√°vel', 'Po√ß√£o de respira√ß√£o aqu√°tica', 'Rede de pesca m√°gica', 'Ervas calmantes', 'Lanterna subaqu√°tica'] },
                { id: 'bruce', name: 'Bruce Blackwood', title: 'Bruxo Herbologista', icon: 'üßô‚Äç‚ôÇÔ∏è', initialGalleons: 15, initialInventory: ['Varinha (Salgueiro)', 'Capa imperme√°vel', 'Po√ß√£o de respira√ß√£o aqu√°tica', 'Rede de pesca m√°gica', 'Ervas calmantes', 'Lanterna subaqu√°tica'] }
            ],
            sections: {
                1: {
                    text: "Voc√™ chega √† margem do Lago Negro ao crep√∫sculo, o ar frio de outono carregado de neblina. Madame Maxime te contatou por coruja, preocupada com relatos de sereianos desaparecidos.\n\n'As luzes... elas brilham como estrelas ca√≠das no fundo do lago', escreveu ela. 'Algo antigo desperta, e pode amea√ßar os alunos de Hogwarts.'\n\nEla te entrega uma lanterna subaqu√°tica e avisa: 'V√° com cuidado. Se precisar de ajuda, mande bolhas encantadas para a superf√≠cie ‚Äì eu estarei vigiando do barco.'\n\nVoc√™ mergulha na √°gua gelada. Ap√≥s descer alguns metros, v√™ luzes pulsantes no fundo e ouve um canto distante. Algo ro√ßa sua perna...",
                    choices: [
                        { text: "Beber a po√ß√£o de respira√ß√£o aqu√°tica e nadar fundo", next: 2, item_loss: ['Po√ß√£o de respira√ß√£o aqu√°tica'] },
                        { text: "Lan√ßar 'Lumos' para investigar", next: 3 },
                        { text: "Mandar bolhas encantadas para Madame Maxime", next: 5 }
                    ]
                },
                2: {
                    text: "Voc√™ engole a po√ß√£o ‚Äì bolhas saem de suas guelras novas. Nadando mais fundo, chega a um recife de algas onde sereianos feridos se escondem. Um deles se aproxima:\n\n'Humana... as luzes nos chamam, mas devoram nossa ess√™ncia. √â uma maldi√ß√£o antiga.'\n\nEle te d√° uma concha encantada. Mas avisa que grindylows guardam o caminho.",
                    items: ['Concha encantada'],
                    choices: [
                        { text: "Lan√ßar 'Aguamenti' para distrair grindylows", next: 6 },
                        { text: "Usar ervas calmantes para ganhar passagem", next: 7, requires: 'Ervas calmantes', item_loss: ['Ervas calmantes'] },
                        { text: "Lan√ßar 'Bubble-Head Charm' para prote√ß√£o", next: 4 }
                    ]
                },
                3: {
                    text: "Voc√™ lan√ßa 'Lumos' ‚Äì a luz revela um grindylow solit√°rio atacando. Voc√™ o repele, mas ele rouba 5 gale√µes! Mais adiante, encontra ru√≠nas subaqu√°ticas com runas brilhantes.",
                    galleon_loss: 5,
                    items: ['Fragmento de runa'],
                    choices: [
                        { text: "Tocar as runas para ativ√°-las", next: 8 },
                        { text: "Lan√ßar 'Accio' para atrair um objeto", next: 18 },
                        { text: "Usar a rede de pesca para capturar o grindylow", next: 9 }
                    ]
                },
                4: {
                    text: "Com a bolha de ar, voc√™ flutua devagar. Encontra peixes luminosos que revelam vis√µes: um antigo artefato amaldi√ßoado, o colar de Salazar Slytherin, despertado por acidente.",
                    vision: true,
                    choices: [
                        { text: "Seguir os peixes para o artefato", next: 10 },
                        { text: "Lan√ßar 'Protego' e investigar ru√≠nas", next: 8 },
                        { text: "Usar a lanterna subaqu√°tica para mapear", next: 19 }
                    ]
                },
                5: {
                    text: "Madame Maxime mergulha com sua varinha gigante. 'O que encontrou, petite?'\n\nEla decide ajudar, mas sua presen√ßa assusta criaturas, tornando o mergulho mais ca√≥tico.",
                    items: ['Ajuda de Maxime'],
                    choices: [
                        { text: "Prosseguir juntos para a fonte", next: 6 },
                        { text: "Pedir distra√ß√£o e lan√ßar 'Invisibilus'", next: 23 },
                        { text: "Lan√ßar 'Sonorus' para convocar sereianos", next: 2 }
                    ]
                },
                6: {
                    text: "Voc√™ chega a uma caverna subaqu√°tica. Dentro, o colar de Slytherin pulsa, sugando energia. Um sereiano possu√≠do ataca! Ele revela que o colar foi despertado por um mergulhador ilegal.",
                    choices: [
                        { text: "Convocar sereianos com a concha", next: 24, requires: 'Concha encantada' },
                        { text: "Lan√ßar 'Relashio' para repelir", next: 25 },
                        { text: "Usar fragmento de runa para selar o colar", next: 13, requires: 'Fragmento de runa' }
                    ]
                },
                7: {
                    text: "As ervas acalmam os grindylows ‚Äì eles te guiam para um tesouro escondido: uma po√ß√£o de invisibilidade aqu√°tica! Mas o canto das luzes fica mais forte, te hipnotizando.",
                    items: ['Po√ß√£o de invisibilidade'],
                    choices: [
                        { text: "Resistir e ir para a caverna", next: 6 },
                        { text: "Lan√ßar 'Finite Incantatem' contra a hipnose", next: 20 },
                        { text: "Usar a po√ß√£o para se aproximar invis√≠vel", next: 10, requires: 'Po√ß√£o de invisibilidade' }
                    ]
                },
                8: {
                    text: "As runas mostram o passado: Slytherin amaldi√ßoou o colar para proteger segredos. Mas drena sua energia ‚Äì perca 5 gale√µes. Voc√™ agora sabe como destruir o colar!",
                    galleon_loss: 5,
                    choices: [
                        { text: "Ir ao colar com seu novo conhecimento", next: 12 },
                        { text: "Procurar aliados sereianos", next: 2 },
                        { text: "Lan√ßar 'Reparo' nas runas", next: 26 }
                    ]
                },
                9: {
                    text: "A rede captura um grindylow ‚Äì ele revela que o mergulhador √© um contrabandista! Voc√™ ouve o colar pulsando perto.",
                    items: ['Dente de grindylow'],
                    choices: [
                        { text: "Enfrentar o mergulhador usando o dente", next: 12 },
                        { text: "Lan√ßar 'Muffliato' e observar", next: 13 },
                        { text: "Voltar √† superf√≠cie para relatar", next: 11 }
                    ]
                },
                10: {
                    text: "Os peixes te levam ao colar. √â brilhante e hipn√≥tico.",
                    choices: [
                        { text: "Lan√ßar 'Bombarda' para destruir (Arriscado)", next: 21 },
                        { text: "Pegar o colar com cuidado", next: 15 },
                        { text: "Usar a rede de pesca para envolver de longe", next: 27 }
                    ]
                },
                11: {
                    text: "Voc√™ emerge e relata ao Minist√©rio. Eles resolvem o mist√©rio, mas sua recompensa √© pequena. Fim da aventura.",
                    choices: [{ text: "RECOME√áAR AVENTURA", next: 'RESET', class: 'end-btn' }],
                    status: "SUCESSO MODERADO"
                },
                12: {
                    text: "Voc√™ localiza o mergulhador ilegal! Ele se vira com varinha em punho. O ambiente est√° inst√°vel.",
                    choices: [
                        { text: "Usar o dente de grindylow", next: 28, requires: 'Dente de grindylow' },
                        { text: "Lan√ßar 'Stupefy' diretamente", next: 29 },
                        { text: "Usar ajuda de Maxime para investida", next: 30, requires: 'Ajuda de Maxime' }
                    ]
                },
                13: {
                    text: "Voc√™ arma um feiti√ßo de selamento. O colar fica inativo temporariamente.",
                    choices: [
                        { text: "Destruir com 'Incendio'", next: 15 },
                        { text: "Entregar ao Minist√©rio intacto", next: 14 },
                        { text: "Lan√ßar 'Geminio' para copiar e estudar", next: 31 }
                    ]
                },
                14: {
                    text: "Voc√™ captura o culpado e sela o colar! Madame Maxime te elogia e voc√™ ganha uma posi√ß√£o em Hogwarts. Vit√≥ria!",
                    choices: [{ text: "JOGAR NOVAMENTE", next: 'RESET', class: 'end-btn' }],
                    status: "SUCESSO √âPICO!!!"
                },
                15: {
                    text: "Voc√™ √© pego pela maldi√ß√£o! Ferida, mal escapa das profundezas. Madame Maxime te resgata, mas o perigo persiste.",
                    choices: [{ text: "TENTAR NOVAMENTE", next: 'RESET', class: 'end-btn' }],
                    status: "FRACASSO!"
                },
                16: {
                    text: "O mergulhador foi capturado. As criaturas come√ßam a se recuperar.",
                    choices: [
                        { text: "Interrogar o mergulhador", next: 22 },
                        { text: "Lan√ßar 'Obliviate' e entreg√°-lo", next: 14 },
                        { text: "Usar ervas calmantes para extrair confiss√£o", next: 32, requires: 'Ervas calmantes' }
                    ]
                },
                18: {
                    text: "O 'Accio' traz um amuleto que revela um mapa subaqu√°tico! Mas atrai mais grindylows.",
                    items: ['Mapa subaqu√°tico'],
                    choices: [
                        { text: "Usar o mapa para ir √† fonte", next: 6 },
                        { text: "Lan√ßar 'Repello Inimicum'", next: 10 },
                        { text: "Chamar refor√ßos de Madame Maxime", next: 5 }
                    ]
                },
                19: {
                    text: "A lanterna revela caminhos ocultos, mas a energia acaba. Voc√™ encontra o rastro do mergulhador.",
                    item_loss: ['Lanterna subaqu√°tica'],
                    choices: [
                        { text: "Seguir o rastro agora", next: 12 },
                        { text: "Compartilhar pista com sereianos", next: 2, requires: 'Concha encantada' },
                        { text: "Lan√ßar 'Alohomora' na barreira", next: 8 }
                    ]
                },
                20: {
                    text: "O 'Finite Incantatem' quebra o encanto, mas o mergulhador foge, deixando um di√°rio!",
                    items: ['Di√°rio flutuante'],
                    choices: [
                        { text: "Ler o di√°rio para pistas", next: 12 },
                        { text: "Ignorar e ir √† caverna", next: 6 },
                        { text: "Usar o di√°rio como isca", next: 9 }
                    ]
                },
                21: {
                    text: "O 'Bombarda' explode o colar, mas causa um turbilh√£o violento corpor√™o.",
                    item_loss_random: true,
                    choices: [
                        { text: "Nadar de volta para res√≠duos", next: 16 },
                        { text: "Chamar Maxime", next: 14 },
                        { text: "Explorar turbilh√£o por tesouros", next: 15 }
                    ]
                },
                22: {
                    text: "Ele confessa: o colar era para o mercado negro. Voc√™ ganha 10 gale√µes! Mas sereianos irritados chegam exigindo justi√ßa.",
                    galleon_gain: 10,
                    choices: [
                        { text: "Lan√ßar 'Petrificus Totalus'", next: 14 },
                        { text: "Entreg√°-lo aos sereianos", next: 15 },
                        { text: "Negociar usando a concha", next: 33, requires: 'Concha encantada' }
                    ]
                },
                23: {
                    text: "Maxime distrai, voc√™ se esconde. O esfor√ßo m√°gico drena seus recursos.",
                    item_loss: ['Ervas calmantes'],
                    choices: [
                        { text: "Entrar na passagem secreta", next: 8 },
                        { text: "Convocar sereianos", next: 2 },
                        { text: "Observar de longe", next: 13 }
                    ]
                },
                24: {
                    text: "Os sereianos aliados chegam! Eles distraem o possu√≠do, permitindo a captura.",
                    item_loss: ['Concha encantada'],
                    choices: [{ text: "PROSSEGUIR", next: 16, class: 'end-btn' }]
                },
                25: {
                    text: "O 'Relashio' repele, mas o contra-ataque √© forte. Voc√™ perde f√¥lego!",
                    item_loss: ['Po√ß√£o de respira√ß√£o aqu√°tica'],
                    choices: [{ text: "CONTINUAR", next: 15, class: 'end-btn' }]
                },
                26: {
                    text: "O 'Reparo' revela um feiti√ßo para enfraquecer maldi√ß√µes! Mas grindylows se aproximam.",
                    choices: [
                        { text: "Fugir para a fonte", next: 6 },
                        { text: "Usar rede de pesca", next: 9 }
                    ]
                },
                27: {
                    text: "A rede envolve o colar, mas a maldi√ß√£o rebate ferindo voc√™ e sua bolsa.",
                    galleon_loss: 5,
                    choices: [{ text: "PROSSEGUIR", next: 15, class: 'end-btn' }]
                },
                28: {
                    text: "O dente improvisado acerta o mergulhador! Ele cai atordoado.",
                    item_loss: ['Dente de grindylow'],
                    choices: [{ text: "CAPTURAR", next: 16, class: 'end-btn' }]
                },
                29: {
                    text: "O 'Stupefy' falha na √°gua inst√°vel. O mergulhador te atinge!",
                    choices: [{ text: "CONTINUAR", next: 15, class: 'end-btn' }]
                },
                30: {
                    text: "Com Maxime, a vit√≥ria √© esmagadora. O mergulhador n√£o teve chance.",
                    choices: [{ text: "VIT√ìRIA", next: 16, class: 'end-btn' }]
                },
                31: {
                    text: "O 'Geminio' cria caos conforme a maldi√ß√£o se espalha para a c√≥pia!",
                    choices: [{ text: "FUGIR", next: 15, class: 'end-btn' }]
                },
                32: {
                    text: "As ervas acalmam o criminoso, que confessa tudo voluntariamente.",
                    item_loss: ['Ervas calmantes'],
                    choices: [{ text: "CONCLUIR", next: 14, class: 'end-btn' }]
                },
                33: {
                    text: "A concha negocia paz. Eles te presenteiam com ouro do lago!",
                    galleon_gain: 20,
                    choices: [{ text: "CONCLUIR", next: 16, class: 'end-btn' }]
                }
            }
        },
        'biblioteca_proibida': {
            title: "Enigmas da Biblioteca Proibida",
            description: "Voc√™ √© Rowan Whitlock, um bruxo comum que trabalha na Biblioteca de Hogsmeade. Madame Pince foi petrificada e voc√™ foi chamado para conter o poderoso Codex Umbrae antes que criaturas m√°gicas escapem da Se√ß√£o Restrita e invadam Hogwarts.",
            characters: [
                { id: 'rowan', name: 'Rowan Whitlock', title: 'Assistente de Biblioteca', icon: 'üìñ', initialGalleons: 10, initialInventory: ['Varinha (B√©tula)', 'Chave da Biblioteca', 'Po√ß√£o de Acuidade Mental', 'Pena de coruja encantada', 'Luvas de pele de drag√£o', 'Lanterna de bolso'] }
            ],
            sections: {
                1: {
                    text: "Voc√™ chega ao Sal√£o Principal de Hogwarts √†s duas da madrugada. A chave gira na porta da biblioteca com um clique suave. Ao entrar, o sil√™ncio √© absoluto ‚Äî at√© demais. As luzes est√£o apagadas, mas voc√™ v√™ um brilho fraco vindo da Se√ß√£o Restrita no fundo.\n\nDe repente, ouve p√°ginas virando sozinhas e um sussurro de asas. Algo pequeno e r√°pido passa voando perto da sua cabe√ßa.",
                    choices: [
                        { text: "Beber a Po√ß√£o de Acuidade Mental imediatamente", next: 2, item_loss: ['Po√ß√£o de Acuidade Mental'] },
                        { text: "Lan√ßar 'Lumos' para iluminar o caminho", next: 3 },
                        { text: "Andar √†s escuras, guiando-se pelo brilho", next: 4 }
                    ]
                },
                2: {
                    text: "A po√ß√£o faz efeito: seus sentidos se agu√ßam. Voc√™ percebe cheiros de tinta antiga e rastros luminosos de pixies espalhando p√≥ de fada. Ganhou vantagem: Voc√™ percebe armadilhas m√°gicas com anteced√™ncia!",
                    items: ['Conhecimento: Armadilhas'],
                    choices: [
                        { text: "Seguir diretamente para a Se√ß√£o Restrita", next: 5 },
                        { text: "Procurar um livro de cataloga√ß√£o", next: 6 }
                    ]
                },
                3: {
                    text: "'Lumos!' A luz ilumina o sal√£o, mas o brilho atrai um enxame de pixies! Elas come√ßam a bombardear voc√™ com livros pesados.",
                    choices: [
                        { text: "Usar as luvas de pele de drag√£o para se proteger", next: 7, requires: 'Luvas de pele de drag√£o' },
                        { text: "Fugir para as sombras", next: 8, galleon_loss: 5 }
                    ]
                },
                4: {
                    text: "Voc√™ se move em sil√™ncio absoluto. Chega √† grade da Se√ß√£o Restrita e v√™ um basilisco beb√™ ‚Äî uma ilustra√ß√£o viva que escapou das p√°ginas ‚Äî rastejando pelo ch√£o.",
                    choices: [
                        { text: "Tentar captur√°-lo com as luvas de pele de drag√£o", next: 9, requires: 'Luvas de pele de drag√£o' },
                        { text: "Lan√ßar 'Serpensortia' para criar uma distra√ß√£o", next: 10 }
                    ]
                },
                5: {
                    text: "Voc√™ entra na Se√ß√£o Restrita. Livros voam como p√°ssaros de papel cortantes. No centro, o Codex Umbrae est√° aberto, suas p√°ginas pulsando com uma energia sombria.",
                    choices: [
                        { text: "Lan√ßar 'Finite Incantatem' diretamente no livro", next: 11 },
                        { text: "Procurar um manual de conten√ß√£o nas prateleiras", next: 12 }
                    ]
                },
                6: {
                    text: "O cat√°logo revela o segredo: o Codex s√≥ fecha com a sequ√™ncia: 'Clausura', 'Sigillum' e 'Finite'.",
                    items: ['Conhecimento: Sequ√™ncia de Selamento'],
                    choices: [
                        { text: "Ir imediatamente ao Codex", next: 13 },
                        { text: "Capturar criaturas menores primeiro", next: 9 }
                    ]
                },
                7: {
                    text: "As luvas de pele de drag√£o bloqueiam os ataques. Voc√™ lan√ßa 'Immobulus' e as pixies congelam. Voc√™ as coloca em um frasco m√°gico.",
                    items: ['Frasco com Pixies'],
                    choices: [{ text: "Prosseguir para a Se√ß√£o Restrita", next: 5 }]
                },
                8: {
                    text: "Voc√™ corre, mas 5 gale√µes caem da sua bolsa no caos. Voc√™ chega ofegante √† Se√ß√£o Restrita.",
                    choices: [{ text: "Entrar na Se√ß√£o", next: 5 }]
                },
                9: {
                    text: "Sucesso! O basilisco beb√™ est√° contido em um pergaminho. Ele pode ser √∫til.",
                    items: ['Basilisco Beb√™ Contido'],
                    choices: [{ text: "Ir ao Codex", next: 5 }]
                },
                10: {
                    text: "A cobra distraiu o basilisco, mas o barulho atraiu um Dementador em miniatura!",
                    choices: [
                        { text: "Tentar lan√ßar 'Expecto Patronum'", next: 17 },
                        { text: "Fugir para o Codex", next: 18 }
                    ]
                },
                11: {
                    text: "O feiti√ßo rebate! O Codex lan√ßa uma onda de choque que apaga sua lanterna e te joga contra a prateleira.",
                    status: "FRACASSO PARCIAL",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                },
                12: {
                    text: "Voc√™ encontra o Manual de Conten√ß√£o! Aprende o feiti√ßo 'Clausura'.",
                    items: ['Feiti√ßo: Clausura'],
                    choices: [{ text: "Usar Clausura no Codex", next: 20 }]
                },
                13: {
                    text: "Voc√™ inicia a sequ√™ncia. Os s√≠mbolos brilham. O Codex tenta resistir, mas voc√™ √© firme.",
                    choices: [{ text: "Finalizar o Selamento", next: 21 }]
                },
                17: {
                    text: "Um brilho prateado fraco afasta a criatura. Voc√™ escapa!",
                    choices: [{ text: "Correr para o Codex", next: 5 }]
                },
                18: {
                    text: "Voc√™ corre desesperadamente enquanto o frio aumenta. Chega ao Codex exausto.",
                    choices: [{ text: "Tentar selar agora", next: 11 }]
                },
                20: {
                    text: "O feiti√ßo Clausura come√ßa a fechar o livro, mas ele exige mais energia.",
                    choices: [
                        { text: "Usar a sequ√™ncia completa", next: 21, requires: 'Conhecimento: Sequ√™ncia de Selamento' },
                        { text: "For√ßar o fechamento manual", next: 15 }
                    ]
                },
                21: {
                    text: "O Codex se fecha com um estalo met√°lico. O sil√™ncio volta √† biblioteca. As criaturas s√£o sugadas de volta para as p√°ginas.",
                    status: "SUCESSO √âPICO!!!",
                    choices: [{ text: "FINALIZAR JORNADA", next: 30 }]
                },
                15: {
                    text: "A magia negra te consome. Voc√™ falha em fechar o livro a tempo.",
                    status: "FRACASSO!",
                    choices: [{ text: "TENTAR NOVAMENTE", next: 'RESET', class: 'end-btn' }]
                },
                30: {
                    text: "Madame Pince foi salva e a biblioteca est√° segura. Voc√™ provou ser um mestre dos livros. Hogwarts te deve uma d√≠vida eterna.",
                    status: "FINAL HEROICO",
                    choices: [{ text: "VOLTAR √Ä BIBLIOTECA", next: 'RESET', class: 'end-btn' }]
                }
            }
        },
        'fantasma_azkaban': {
            title: "O Fantasma de Azkaban",
            description: "Voc√™ √© Finn MacLeod, um bruxo nascido em uma pequena vila de pescadores nas ilhas geladas do norte da Esc√≥cia. Seu poder m√°gico √© selvagem e instintivo. Sua miss√£o: sobreviver √† noite em que o navio fantasma Corvo Negro ressurge das √°guas geladas perto da fortaleza de Azkaban.",
            characters: [
                { id: 'finn', name: 'Finn MacLeod', title: 'Bruxo Selvagem do Norte', icon: 'üõ∂', initialGalleons: 0, initialInventory: ['Faca de peixe', 'Amuleto de concha'], initialStrength: 3 }
            ],
            sections: {
                1: {
                    text: "O barco balan√ßa suavemente sob a lua cheia. Seu av√¥ Duncan rema devagar, redes prontas. A √°gua est√° estranhamente quieta. De repente, o amuleto esquenta contra seu peito. Ao longe, uma sombra maior que qualquer ilha surge do mar: velas rasgadas, mastros quebrados, luzes verdes nos conveses. O Corvo Negro voltou. Um grito sobrenatural corta o ar, e voc√™s veem silhuetas ossudas nos cordames.",
                    choices: [
                        { text: "Gritar para o av√¥ fugir imediatamente", next: 2 },
                        { text: "Apagar a lanterna e tentar se esconder", next: 3 },
                        { text: "Deixar a magia explodir contra o navio", next: 4 }
                    ]
                },
                2: {
                    text: "Duncan rema com for√ßa. O barco avan√ßa, mas o Corvo Negro √© mais r√°pido que o vento. Esqueletos saltam na √°gua e nadam como tubar√µes. Um deles agarra a borda. Duncan golpeia com o remo.",
                    choices: [
                        { text: "Ajudar com a faca de peixe", next: 5, requires: 'Faca de peixe' },
                        { text: "Tentar empurrar com magia instintiva", next: 6 }
                    ]
                },
                3: {
                    text: "Voc√™s apagam a luz e se agacham. O Corvo Negro passa perto, rangendo. Ouves uma voz rouca no conv√©s: ‚ÄúAche os vivos‚Ä¶ tragam seus cora√ß√µes quentes.‚Äù A n√©voa os protege por enquanto, mas o frio dos dementadores come√ßa a se aproximar.",
                    choices: [
                        { text: "Remar silenciosamente para longe", next: 7 },
                        { text: "Aproximar-se devagar para entender", next: 8 }
                    ]
                },
                4: {
                    text: "A raiva toma voc√™. Uma onda enorme se ergue sem palavras e bate contra o Corvo Negro. O navio balan√ßa, mas a magia atrai aten√ß√£o. O pirata capit√£o aponta para voc√™s. ‚ÄúCapturem vivos!‚Äù",
                    strength_loss: 1,
                    choices: [
                        { text: "Fugir agora desorganizados", next: 2 },
                        { text: "Tentar outra onda maior", next: 9 }
                    ]
                },
                5: {
                    text: "Voc√™ crava a faca no esqueleto. Ele se desfaz em p√≥, mas outro sobe. Duncan grita: ‚ÄúUse o sal grosso da caixa!‚Äù",
                    items: ['Punhado de sal marinho encantado'],
                    choices: [
                        { text: "Jogar sal nos esqueletos", next: 10 },
                        { text: "Continuar lutando corpo a corpo", next: 11 }
                    ]
                },
                6: {
                    text: "Voc√™ empurra com as m√£os. Uma rajada de vento gelado lan√ßa o esqueleto para longe, mas o esfor√ßo te deixa tonto. Voc√™ sente que pode direcionar melhor o poder.",
                    strength_gain: 1,
                    choices: [
                        { text: "Fugir para a costa", next: 12 },
                        { text: "Tentar algo maior", next: 13 }
                    ]
                },
                7: {
                    text: "Voc√™s escapam da n√©voa, mas veem uma forma colossal emergir: a criatura abissal, uma serpente marinha com olhos negros.",
                    choices: [
                        { text: "Virar para √°guas rasas", next: 14 },
                        { text: "Tentar distra√≠-la com magia", next: 15 }
                    ]
                },
                8: {
                    text: "Voc√™s se aproximam. No conv√©s, o capit√£o ergue um medalh√£o brilhante. Ele percebe voc√™s. Esqueletos mergulham.",
                    choices: [
                        { text: "Fugir imediatamente", next: 12 },
                        { text: "Tentar roubar o medalh√£o com magia", next: 16 }
                    ]
                },
                9: {
                    text: "Voc√™ for√ßa outra onda. Ela atinge o Corvo Negro em cheio, mas o esfor√ßo te esgota completamente.",
                    strength_loss: 3,
                    choices: [{ text: "Desmaiar...", next: 17 }]
                },
                10: {
                    text: "O sal queima os esqueletos como √°cido. O caminho fica livre por um momento. Duncan grita: ‚ÄúPara as pedras do c√≠rculo antigo!‚Äù",
                    choices: [
                        { text: "Remar para o c√≠rculo de pedras", next: 18 },
                        { text: "Aproveitar para atacar o navio", next: 19 }
                    ]
                },
                11: {
                    text: "Voc√™s lutam bravamente, mas s√£o superados. Esqueletos arrastam Duncan. Voc√™ escapa por pouco, ferido e sozinho.",
                    choices: [{ text: "Avan√ßar", next: 20 }]
                },
                12: {
                    text: "Voc√™s alcan√ßam √°guas rasas, mas o capit√£o envia a criatura abissal. Ela bate no barco, quase o virando.",
                    choices: [
                        { text: "Saltar para a praia e correr", next: 21 },
                        { text: "Enfrentar a criatura com magia", next: 22 }
                    ]
                },
                13: {
                    text: "Voc√™ sente o poder fluir melhor. Ergue uma barreira de √°gua girat√≥ria ao redor do barco. A criatura recua.",
                    strength_gain: 1,
                    choices: [
                        { text: "Aproximar-se do Corvo Negro", next: 23 },
                        { text: "Fugir para o c√≠rculo de pedras", next: 18 }
                    ]
                },
                14: {
                    text: "A criatura n√£o alcan√ßa. Voc√™s encalham na praia rochosa. Mortos-vivos come√ßam a caminhar pelo fundo raso.",
                    choices: [
                        { text: "Correr para a vila", next: 24 },
                        { text: "Voltar ao mar para enfrentar", next: 19 }
                    ]
                },
                15: {
                    text: "Voc√™ lan√ßa uma explos√£o de luz. A criatura se confunde e ataca o pr√≥prio navio. Voc√™s ganham tempo.",
                    choices: [
                        { text: "Aproveitar para fugir", next: 12 },
                        { text: "Aproximar-se do navio danificado", next: 23 }
                    ]
                },
                16: {
                    text: "A magia arranca o medalh√£o do pesco√ßo do capit√£o! Ele cai na √°gua perto do barco.",
                    items: ['Medalh√£o do Corvo'],
                    choices: [{ text: "Pescar o medalh√£o", next: 25 }]
                },
                17: {
                    text: "Voc√™ acorda acorrentado. Duncan est√° ao lado, ferido. O capit√£o entra: ‚ÄúSeu poder vai alimentar meu navio.‚Äù",
                    choices: [
                        { text: "Tentar explodir as correntes", next: 26 },
                        { text: "Conversar para ganhar tempo", next: 27 }
                    ]
                },
                18: {
                    text: "Voc√™s chegam ao c√≠rculo submerso. As pedras antigas brilham, repelindo os mortos-vivos. Duncan diz: ‚ÄúAqui os antigos selaram coisas piores.‚Äù",
                    choices: [
                        { text: "Tentar ritual de banimento", next: 28 },
                        { text: "Esperar ajuda da costa", next: 29 }
                    ]
                },
                19: {
                    text: "Voc√™s remam direto contra o Corvo Negro e abordam pelo lado cego.",
                    choices: [
                        { text: "Procurar o capit√£o", next: 30 },
                        { text: "Tentar incendiar o navio", next: 31 }
                    ]
                },
                20: {
                    text: "Duncan foi levado. Voc√™ rema sozinho, ferido. O amuleto queima forte.",
                    choices: [
                        { text: "Voltar para salvar o av√¥", next: 19 },
                        { text: "Ir √† vila por refor√ßos", next: 24 }
                    ]
                },
                21: {
                    text: "Voc√™s correm. A criatura n√£o segue em terra, mas dementadores aparecem no c√©u. O frio chega.",
                    choices: [
                        { text: "Correr para a vila", next: 24 },
                        { text: "Enfrentar dementadores", next: 32 }
                    ]
                },
                22: {
                    text: "Uma coluna de √°gua esmaga a criatura contra rochas! Ela geme e afunda. Voc√™ sente o poder crescer.",
                    strength_gain: 2,
                    choices: [{ text: "Perseguir o capit√£o", next: 33 }]
                },
                23: {
                    text: "A barreira de √°gua permite abordar o navio. Voc√™s sobem a bordo silenciosamente.",
                    choices: [
                        { text: "Procurar Duncan nos por√µes", next: 34 },
                        { text: "Ir direto ao conv√©s", next: 30 }
                    ]
                },
                24: {
                    text: "Voc√™s chegam √† vila. Aurores aparecem horas depois. Duncan pode estar perdido.",
                    status: "FINAL NEUTRO",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                },
                25: {
                    text: "O medalh√£o pulsa em sua m√£o com energia negra. O capit√£o jura vingan√ßa eterna.",
                    choices: [
                        { text: "Usar contra o capit√£o", next: 35 },
                        { text: "Jogar no mar profundo", next: 36 },
                        { text: "Enfrentar o capit√£o com ele", next: 37 }
                    ]
                },
                26: {
                    text: "Voc√™ quebra as correntes e liberta Duncan. Fogem para o conv√©s no caos.",
                    choices: [{ text: "Avan√ßar", next: 38 }]
                },
                27: {
                    text: "O capit√£o ri. Diz que o medalh√£o precisa de sangue quente. Oferece dividir o poder.",
                    choices: [
                        { text: "Recusar e atacar", next: 39 },
                        { text: "Aceitar para trair depois", next: 40 }
                    ]
                },
                28: {
                    text: "Voc√™ tenta ativar as pedras antigas.",
                    choices: [
                        { text: "Realizar Ritual", next: 42, requires: 'STRENGTH:4' },
                        { text: "Falha no Ritual", next: 41 }
                    ]
                },
                29: {
                    text: "Aurores chegam tarde. O navio partiu com Duncan. Voc√™ sobrevive com culpa.",
                    status: "FINAL AMARGO",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                },
                30: {
                    text: "Duelo final no conv√©s! Voc√™ contra o pirata bruxo.",
                    choices: [
                        { text: "Desferir golpe final", next: 42, requires: 'STRENGTH:3' },
                        { text: "Ser superado", next: 43 }
                    ]
                },
                31: {
                    text: "Voc√™ cria fogo azul que queima a madeira fantasma! Mas a criatura emerge para proteger.",
                    choices: [{ text: "Enfrentar Criatura", next: 22 }]
                },
                32: {
                    text: "Sua magia cria calor e repele o frio. Aurores interv√™m a tempo.",
                    status: "FINAL BOM",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                },
                33: {
                    text: "O capit√£o tenta fugir para o navio. Voc√™s o cercam.",
                    choices: [{ text: "Abordar Navio", next: 23 }]
                },
                34: {
                    text: "Voc√™s encontram Duncan! Ele segura uma velha rede de prata.",
                    items: ['Rede de prata antiga'],
                    choices: [{ text: "Subir ao conv√©s", next: 38 }]
                },
                35: {
                    text: "Os esqueletos se voltam contra o capit√£o! Tudo come√ßa a afundar.",
                    choices: [{ text: "Escapar", next: 44 }]
                },
                36: {
                    text: "O navio perde poder e desmorona. Voc√™s escapam em seguran√ßa.",
                    status: "FINAL BOM",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                },
                37: {
                    text: "Voc√™ vence, mas a escurid√£o cresce em voc√™. Voc√™ √© o novo fantasma do Corvo Negro.",
                    status: "FINAL SOMBRIO",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                },
                38: {
                    text: "Com Duncan e a rede, voc√™s enfrentam o fim da tripula√ß√£o.",
                    choices: [{ text: "Concluir", next: 42 }]
                },
                39: {
                    text: "Voc√™ o derruba no mar! O navio desaba sem seu mestre.",
                    status: "FINAL HEROICO",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                },
                40: {
                    text: "A trai√ß√£o √© descoberta. O capit√£o te mata friamente.",
                    status: "FINAL RUIM",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                },
                41: {
                    text: "O navio √© danificado, mas escapa. A amea√ßa continua.",
                    status: "FINAL INCOMPLETO",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                },
                42: {
                    text: "Vit√≥ria total! O Corvo Negro afunda, a criatura √© banida e Duncan est√° salvo.",
                    status: "FINAL HEROICO",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                },
                43: {
                    text: "Voc√™ falhou. Agora √© parte da tripula√ß√£o fantasma para sempre.",
                    status: "FINAL TR√ÅGICO",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                },
                44: {
                    text: "Voc√™s escapam por pouco. A amea√ßa acabou, mas o medalh√£o sumiu.",
                    status: "FINAL INCERTO",
                    choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                }
            },
            'sombras_hogwarts': {
                title: "Sombras de Hogwarts",
                description: "Voc√™ √© Rowan Hale, aluno do s√©timo ano da Lufa-Lufa. Quietamente curioso, excelente em Po√ß√µes e Hist√≥ria da Magia. Sua miss√£o: descobrir a verdade sobre as Sombras de Hogwarts e decidir o destino delas antes que o castelo caia na escurid√£o eterna.",
                characters: [
                    { id: 'rowan', name: 'Rowan Hale', title: 'Curioso da Lufa-Lufa', icon: 'ü¶°', initialGalleons: 0, initialInventory: ['Varinha de Faia', 'O Mapa do Maroto'] }
                ],
                sections: {
                    1: {
                        text: "Chuva forte contra as janelas da sala comum da Lufa-Lufa. Quase meia-noite. Voc√™ abre o Mapa do Maroto e v√™ um ponto sem nome piscando no s√©timo andar, perto da tape√ßaria dos trolls dan√ßarinos.",
                        choices: [
                            { text: "Ir imediatamente investigar", next: 2 },
                            { text: "Esperar at√© o amanhecer", next: 3 },
                            { text: "Contar para algu√©m antes", next: 4 }
                        ]
                    },
                    2: {
                        text: "Voc√™ chega ao s√©timo andar. Afasta a tape√ßaria e encontra uma porta de pedra negra com uma runa circular no centro.",
                        choices: [
                            { text: "Tocar a runa com a varinha", next: 5, requires: 'Varinha de Faia' },
                            { text: "Tentar ‚ÄúAlohomora‚Äù", next: 6 },
                            { text: "Voltar e pesquisar na biblioteca", next: 7 }
                        ]
                    },
                    3: {
                        text: "Voc√™ espera. O dia passa normal. √Ä noite, a porta ainda est√° l√°, mas o ponto no mapa sumiu.",
                        choices: [
                            { text: "Tocar a runa agora", next: 5 },
                            { text: "Voltar com mais prepara√ß√£o", next: 8 }
                        ]
                    },
                    4: {
                        text: "Voc√™ conta para Lila Finnigan (Corvinal). Ela quer ir junto imediatamente.",
                        choices: [
                            { text: "Ir juntos agora", next: 9 },
                            { text: "Planejar para amanh√£", next: 10 }
                        ]
                    },
                    5: {
                        text: "A porta desliza. Uma escadaria em espiral desce na escurid√£o, ar gelado sobe.",
                        choices: [
                            { text: "Descer com 'Lumos'", next: 11 },
                            { text: "Descer sem luz", next: 12 },
                            { text: "Fechar e voltar depois", next: 13 }
                        ]
                    },
                    6: {
                        text: "‚ÄúAlohomora‚Äù falha. A runa brilha vermelha por um segundo.",
                        choices: [
                            { text: "Tocar com a m√£o", next: 14 },
                            { text: "Ir √† biblioteca", next: 7 }
                        ]
                    },
                    7: {
                        text: "Voc√™ encontra ‚ÄúRunas Fundacionais dos Quatro‚Äù. A runa √© o selo dos Fundadores para c√¢maras secretas.",
                        choices: [
                            { text: "Voltar √† porta √† noite", next: 2 },
                            { text: "Contar para McGonagall", next: 15 }
                        ]
                    },
                    8: {
                        text: "Voc√™ estuda mapas antigos com Lila. O corredor n√£o existe em nenhum plano oficial.",
                        choices: [
                            { text: "Voltar sozinho", next: 2 },
                            { text: "Voltar com Lila", next: 9 }
                        ]
                    },
                    9: {
                        text: "Voc√™s abrem a porta. Lila ouve seu nome sussurrado. Ar frio intenso.",
                        choices: [
                            { text: "Descer juntos", next: 16 },
                            { text: "Pesquisar antes", next: 17 }
                        ]
                    },
                    10: {
                        text: "Voc√™s planejam. Nos dias seguintes, Lila tem pesadelos com sombras.",
                        choices: [
                            { text: "Voltar √† porta", next: 16 },
                            { text: "Procurar professor", next: 18 }
                        ]
                    },
                    11: {
                        text: "‚ÄúLumos‚Äù revela paredes cobertas de s√≠mbolos dos Fundadores e figuras encapuzadas com correntes.",
                        choices: [
                            { text: "Continuar descendo", next: 19 },
                            { text: "Examinar grava√ß√µes", next: 20 }
                        ]
                    },
                    12: {
                        text: "No escuro, voc√™ trope√ßa e cai. Varinha rola. Tudo preto.",
                        choices: [
                            { text: "Tentar magia sem varinha", next: 21 },
                            { text: "Procurar varinha rastejando", next: 22 }
                        ]
                    },
                    13: {
                        text: "Voc√™ fecha a porta. Sussurros come√ßam nos corredores durante o dia. Mapa mostra v√°rios pontos piscando.",
                        choices: [
                            { text: "Investigar outro ponto", next: 23 },
                            { text: "Contar para algu√©m", next: 18 }
                        ]
                    },
                    14: {
                        text: "Ao tocar com a m√£o, vis√£o: quatro figuras (Fundadores) selando algo negro que se contorce.",
                        choices: [
                            { text: "Abrir a porta", next: 5 },
                            { text: "Recuar assustado", next: 13 }
                        ]
                    },
                    15: {
                        text: "McGonagall ouve, mas diz que n√£o h√° registro de tal porta. Pede sigilo.",
                        choices: [
                            { text: "Confiar e esperar", next: 24 },
                            { text: "Voltar sozinho √† noite", next: 2 }
                        ]
                    },
                    16: {
                        text: "Voc√™s descem juntos. As tochas azuis se acendem sozinhas. Chegam a uma c√¢mara circular com pedestais das Casas.",
                        choices: [
                            { text: "Examinar pedestais", next: 25 },
                            { text: "Tocar o centro da sala", next: 26 }
                        ]
                    },
                    17: {
                        text: "Pesquisa revela lenda: ‚ÄúA Sombra Primordial‚Äù, entidade anterior aos Fundadores.",
                        choices: [
                            { text: "Voltar √† porta", next: 16 },
                            { text: "Contar para outro aluno", next: 27 }
                        ]
                    },
                    18: {
                        text: "O Professor Flitwick fica preocupado, mas pede provas antes de agir.",
                        choices: [
                            { text: "Mostrar a porta", next: 28 },
                            { text: "Investigar sozinho primeiro", next: 2 }
                        ]
                    },
                    19: {
                        text: "A escada termina numa antec√¢mara com espelho antigo. Reflexo tem olhos negros.",
                        choices: [
                            { text: "Ignorar e continuar", next: 29 },
                            { text: "Examinar espelho", next: 30 }
                        ]
                    },
                    20: {
                        text: "As grava√ß√µes contam: a Sombra se alimentava de segredos at√© quase destruir o castelo.",
                        choices: [
                            { text: "Continuar", next: 29 },
                            { text: "Voltar e pesquisar mais", next: 17 }
                        ]
                    },
                    21: {
                        text: "Em p√¢nico, voc√™ consegue luz sem varinha. Uma chama azul flutua na palma. Voc√™ acha a varinha.",
                        choices: [
                            { text: "Descer com a nova luz", next: 31 },
                            { text: "Subir e sair", next: 13 }
                        ]
                    },
                    22: {
                        text: "Voc√™ acha a varinha. Ouves passos descendo atr√°s de voc√™ ‚Äî algu√©m seguiu.",
                        choices: [
                            { text: "Esconder-se", next: 32 },
                            { text: "Confrontar", next: 33 }
                        ]
                    },
                    23: {
                        text: "Outro ponto leva ao por√£o. Rachadura na parede exsuda sombra l√≠quida.",
                        choices: [
                            { text: "Tocar a sombra", next: 34 },
                            { text: "Selar com feiti√ßo", next: 35 }
                        ]
                    },
                    24: {
                        text: "McGonagall investiga, mas a porta sumiu. Ela acha que foi ilus√£o.",
                        choices: [
                            { text: "Aceitar e esquecer", next: 36 },
                            { text: "Voltar sozinho para provar", next: 2 }
                        ]
                    },
                    25: {
                        text: "Cada pedestal tem um objeto: livro, espada, ta√ßa, medalh√£o.",
                        choices: [
                            { text: "Tocar o objeto da Lufa-Lufa", next: 37 },
                            { text: "Tocar outro", next: 38 },
                            { text: "N√£o tocar nenhum", next: 39 }
                        ]
                    },
                    26: {
                        text: "No centro, o ch√£o se abre revelando abismo negro. Voz sussurra: ‚ÄúLibere-me.‚Äù",
                        choices: [
                            { text: "Recuar", next: 39 },
                            { text: "Perguntar quem √©", next: 40 }
                        ]
                    },
                    27: {
                        text: "James Potter (Grifin√≥ria) quer aventura e pede para ir junto.",
                        choices: [
                            { text: "Levar James √† porta", next: 41 },
                            { text: "Manter segredo", next: 17 }
                        ]
                    },
                    28: {
                        text: "Flitwick v√™ a porta e fica p√°lido. Ele sela temporariamente.",
                        choices: [
                            { text: "Obedecer e parar", next: 42 },
                            { text: "Voltar quando ele sair", next: 43 }
                        ]
                    },
                    29: {
                        text: "Voc√™ entra numa c√¢mara com pilares brilhando fracamente. Ao centro uma po√ßa de sombra.",
                        choices: [
                            { text: "Aproximar-se da po√ßa", next: 44 },
                            { text: "Tocar um pilar", next: 45 }
                        ]
                    },
                    30: {
                        text: "O espelho mostra voc√™ mais velho, olhos negros, sorrindo cruelmente.",
                        choices: [
                            { text: "Quebrar o espelho", next: 46 },
                            { text: "Ignorar e continuar", next: 29 }
                        ]
                    },
                    31: {
                        text: "A chama azul revela est√°tuas dos Fundadores. Uma est√° rachada, sombra escorrendo.",
                        choices: [
                            { text: "Tentar consertar a est√°tua", next: 47 },
                            { text: "Seguir em frente", next: 48 }
                        ]
                    },
                    32: {
                        text: "√â o zelador Filch, murmurando sobre ‚Äúsombras de novo‚Äù.",
                        choices: [
                            { text: "Segui-lo", next: 49 },
                            { text: "Continuar sozinho", next: 31 }
                        ]
                    },
                    33: {
                        text: "√â Lila. Ela seguiu preocupada.",
                        choices: [
                            { text: "Descer com ela", next: 16 },
                            { text: "Mandar ela voltar", next: 31 }
                        ]
                    },
                    34: {
                        text: "A sombra entra em voc√™. Voc√™ v√™ segredos de alunos. Ganha conhecimento!",
                        choices: [
                            { text: "Usar para investigar", next: 50 },
                            { text: "Tentar expulsar", next: 51 }
                        ]
                    },
                    35: {
                        text: "Feiti√ßo falha. A rachadura cresce. Sussurros ficam altos.",
                        choices: [
                            { text: "Fugir", next: 13 },
                            { text: "Tentar selo mais forte", next: 52 }
                        ]
                    },
                    36: {
                        text: "Voc√™ esquece. As sombras crescem. Um dia o castelo cai em trevas.",
                        status: "FINAL PRECOCE",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    37: {
                        text: "A ta√ßa mostra vis√£o de Helga curando a Sombra com bondade.",
                        choices: [
                            { text: "Tocar outro objeto", next: 38 },
                            { text: "Sair da c√¢mara", next: 39 }
                        ]
                    },
                    38: {
                        text: "Objeto de outra Casa mostra vis√£o de medo. Sombra cresce.",
                        choices: [
                            { text: "Recuar", next: 39 },
                            { text: "Tocar o √∫ltimo", next: 53 }
                        ]
                    },
                    39: {
                        text: "Voc√™s saem. A porta fecha. Sussurros param por enquanto.",
                        choices: [
                            { text: "Pesquisar sobre os objetos", next: 54 },
                            { text: "Contar para algu√©m", next: 18 }
                        ]
                    },
                    40: {
                        text: "A voz: ‚ÄúEu sou o que restou antes da luz. Libere-me.‚Äù",
                        choices: [
                            { text: "Recusar e sair", next: 39 },
                            { text: "Perguntar como libertar", next: 55 }
                        ]
                    },
                    41: {
                        text: "James abre a porta com bravura. Espada de Gryffindor brilha.",
                        choices: [
                            { text: "Descer com ele", next: 56 },
                            { text: "Avisar perigo", next: 57 }
                        ]
                    },
                    42: {
                        text: "As sombras continuam crescendo em segredo.",
                        status: "FINAL SILENCIOSO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    43: {
                        text: "A porta est√° aberta. Algu√©m entrou antes.",
                        choices: [
                            { text: "Descer atr√°s", next: 58 },
                            { text: "Chamar professores", next: 59 }
                        ]
                    },
                    44: {
                        text: "A figura oferece conhecimento em troca de um segredo seu.",
                        choices: [
                            { text: "Dar um segredo pequeno", next: 60 },
                            { text: "Recusar", next: 61 },
                            { text: "Atacar com feiti√ßo", next: 62 }
                        ]
                    },
                    45: {
                        text: "O pilar da sua Casa brilha. Sente prote√ß√£o tempor√°ria.",
                        choices: [
                            { text: "Tocar outro pilar", next: 63 },
                            { text: "Tentar selar a po√ßa", next: 64 }
                        ]
                    },
                    46: {
                        text: "Sombras riem nos cacos do espelho.",
                        choices: [
                            { text: "Continuar", next: 29 },
                            { text: "Sair correndo", next: 13 }
                        ]
                    },
                    47: {
                        text: "Voc√™ conserta. A est√°tua para de vazar sombra por enquanto.",
                        choices: [
                            { text: "Examinar outras est√°tuas", next: 65 },
                            { text: "Avan√ßar", next: 48 }
                        ]
                    },
                    48: {
                        text: "C√¢mara central com tronos dos Fundadores. Um orbe negro pulsa.",
                        choices: [
                            { text: "Tocar o orbe", next: 66 },
                            { text: "Examinar tronos", next: 67 }
                        ]
                    },
                    49: {
                        text: "Filch viu isso nos anos 40. Avisa para n√£o mexer.",
                        choices: [
                            { text: "Ignorar aviso", next: 31 },
                            { text: "Perguntar mais", next: 68 }
                        ]
                    },
                    50: {
                        text: "Voc√™ descobre mais entradas e rachaduras.",
                        choices: [
                            { text: "Selar todas", next: 69 },
                            { text: "Usar para poder", next: 70 }
                        ]
                    },
                    51: {
                        text: "Voc√™ expulsa a sombra, mas fica fraco por dias.",
                        choices: [
                            { text: "Descansar e voltar", next: 13 },
                            { text: "Continuar mesmo fraco", next: 52 }
                        ]
                    },
                    52: {
                        text: "Selo funciona, mas atrai aten√ß√£o de professores.",
                        choices: [
                            { text: "Fugir", next: 13 },
                            { text: "Explicar tudo", next: 59 }
                        ]
                    },
                    53: {
                        text: "C√¢mara treme. A Sombra desperta parcialmente.",
                        choices: [
                            { text: "Fugir", next: 71 },
                            { text: "Tentar conter", next: 72 }
                        ]
                    },
                    54: {
                        text: "Objetos s√£o chaves para refor√ßar ou quebrar o selo.",
                        choices: [
                            { text: "Voltar √† c√¢mara", next: 25 },
                            { text: "Procurar aliados", next: 73 }
                        ]
                    },
                    55: {
                        text: "Voz explia: destruir os quatro pilares ou tronos.",
                        choices: [
                            { text: "Come√ßar a destruir", next: 74 },
                            { text: "Trair e selar", next: 75 }
                        ]
                    },
                    56: {
                        text: "James √© corajoso, mas impulsivo. Encontram pedestais.",
                        choices: [
                            { text: "Deixar ele tocar a espada", next: 76 },
                            { text: "Impedir", next: 77 }
                        ]
                    },
                    57: {
                        text: "Voc√™s brigam. Ele vai sozinho. Voc√™ segue depois.",
                        choices: [
                            { text: "Encontr√°-lo na c√¢mara", next: 78 },
                            { text: "Avisar professores", next: 59 }
                        ]
                    },
                    58: {
                        text: "Acha pegadas recentes. Algu√©m mais fundo.",
                        choices: [
                            { text: "Seguir pegadas", next: 79 },
                            { text: "Voltar e pedir ajuda", next: 59 }
                        ]
                    },
                    59: {
                        text: "Professores calam a amea√ßa. Voc√™ √© advertido, mas seguro.",
                        status: "FINAL OFICIAL",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    60: {
                        text: "Revela localiza√ß√£o de rel√≠quia clara.",
                        items: ['Fragmento de varinha de Rowena'],
                        choices: [
                            { text: "Procurar a rel√≠quia", next: 80 },
                            { text: "Parar a√≠", next: 61 }
                        ]
                    },
                    61: {
                        text: "Figura se dissipa irritada. Po√ßa fica quieta.",
                        choices: [
                            { text: "Sair da c√¢mara", next: 39 },
                            { text: "Tentar selar a po√ßa", next: 64 }
                        ]
                    },
                    62: {
                        text: "Feiti√ßo rebate. Voc√™ v√™ o plano original dos Fundadores.",
                        choices: [
                            { text: "Usar plano para selar", next: 81 },
                            { text: "Guardar para si", next: 70 }
                        ]
                    },
                    63: {
                        text: "Pilar de outra Casa reage mal. Sombra cresce.",
                        choices: [
                            { text: "Recuar", next: 39 },
                            { text: "Equilibrar com seu pilar", next: 64 }
                        ]
                    },
                    64: {
                        text: "Refor√ßa selo com conhecimento da Lufa-Lufa. Po√ßa diminui.",
                        choices: [
                            { text: "Refor√ßar outros pilares", next: 82 },
                            { text: "Sair satisfeito", next: 83 }
                        ]
                    },
                    65: {
                        text: "Est√°tua de Salazar vaza sombra mais r√°pido.",
                        choices: [
                            { text: "Consertar todas", next: 84 },
                            { text: "Avan√ßar", next: 48 }
                        ]
                    },
                    66: {
                        text: "V√™ o ritual completo de selamento original.",
                        choices: [
                            { text: "Ritual sozinho", next: 85 },
                            { text: "Procurar ajuda", next: 73 }
                        ]
                    },
                    67: {
                        text: "Cada Fundador deixou uma fraqueza espec√≠fica.",
                        choices: [
                            { text: "Anotar tudo", next: 86 },
                            { text: "Tocar um trono", next: 87 }
                        ]
                    },
                    68: {
                        text: "Dumbledore usou a uni√£o das quatro Casas.",
                        choices: [
                            { text: "Recrutar um de cada Casa", next: 73 },
                            { text: "Tentar sozinho", next: 85 }
                        ]
                    },
                    69: {
                        text: "Sela todas as rachaduras. Sombra para por enquanto.",
                        status: "FINAL TEMPOR√ÅRIO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    70: {
                        text: "Usa sombras para saber segredos alheios. Olhos escurecem.",
                        choices: [
                            { text: "Continuar no poder", next: 89 },
                            { text: "Parar antes do fim", next: 51 }
                        ]
                    },
                    71: {
                        text: "Sombra fica mais forte ap√≥s a fuga.",
                        status: "FINAL RUIM PARCIAL",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    72: {
                        text: "Cont√©m parcialmente. Promete voltar.",
                        status: "FINAL NEUTRO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    73: {
                        text: "Recruta Lila, James e outros.",
                        choices: [
                            { text: "Descer em grupo", next: 90 },
                            { text: "Planejar ritual unido", next: 91 }
                        ]
                    },
                    74: {
                        text: "Hogwarts cai na escurid√£o eterna com liberta√ß√£o total.",
                        status: "FINAL CATASTR√ìFICO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    75: {
                        text: "Finge ajudar a Sombra, mas sela para sempre.",
                        status: "FINAL HEROICO SECRETO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    76: {
                        text: "Espada brilha, sombra tenta possuir James.",
                        choices: [
                            { text: "Ajudar James", next: 92 },
                            { text: "Deixar acontecer", next: 93 }
                        ]
                    },
                    77: {
                        text: "James aceita e continuam com cautela.",
                        choices: [
                            { text: "Ir √† c√¢mara central", next: 90 },
                            { text: "Pesquisar mais", next: 54 }
                        ]
                    },
                    78: {
                        text: "Encontra James possu√≠do com olhos negros.",
                        choices: [
                            { text: "Tentar salvar", next: 94 },
                            { text: "Selar com ele dentro", next: 95 }
                        ]
                    },
                    79: {
                        text: "Leva a Draco Malfoy Jr., curioso demais.",
                        choices: [
                            { text: "Confrontar", next: 96 },
                            { text: "Seguir em segredo", next: 97 }
                        ]
                    },
                    80: {
                        text: "Fragmento de Rowena brilha com luz clara.",
                        choices: [
                            { text: "Usar na c√¢mara central", next: 98 },
                            { text: "Guardar", next: 54 }
                        ]
                    },
                    81: {
                        text: "Realiza ritual sozinho com sucesso.",
                        status: "FINAL SOLIT√ÅRIO HEROICO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    82: {
                        text: "Refor√ßa todos os pilares. Selo novo.",
                        status: "FINAL BOM COMPLETO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    83: {
                        text: "As sombras param por gera√ß√µes.",
                        status: "FINAL BOM PARCIAL",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    84: {
                        text: "Selo se fortalece com reparo de est√°tuas.",
                        status: "FINAL RESTAURADOR",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    85: {
                        text: "Cont√©m pagando pre√ßo de sa√∫de m√°gica.",
                        status: "FINAL SACRIFICIAL",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    86: {
                        text: "Entende como refor√ßar ou destruir perfeitamente.",
                        choices: [
                            { text: "Refor√ßar", next: 82 },
                            { text: "Considerar destruir", next: 74 }
                        ]
                    },
                    87: {
                        text: "Trono mostra maior medo. Sombra usa.",
                        choices: [
                            { text: "Resistir", next: 66 },
                            { text: "Sucumbir", next: 70 }
                        ]
                    },
                    88: {
                        text: "Precisava de representantes de cada Casa unidos.",
                        choices: [
                            { text: "Recrutar um de cada Casa", next: 73 },
                            { text: "Tentar sozinho", next: 85 }
                        ]
                    },
                    89: {
                        text: "Voc√™ vira o dom√≠nio sombrio de Hogwarts.",
                        status: "FINAL TIR√ÇNICO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    90: {
                        text: "Cada um toca seu pilar unido.",
                        choices: [
                            { text: "Ritual unido", next: 99 },
                            { text: "Trai√ß√£o", next: 100 }
                        ]
                    },
                    91: {
                        text: "Banimento eterno da Sombra via uni√£o.",
                        status: "FINAL UNIDO E HEROICO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    92: {
                        text: "James fica com cicatriz, mas vivo.",
                        choices: [
                            { text: "Continuar juntos", next: 90 },
                            { text: "Ele sair", next: 81 }
                        ]
                    },
                    93: {
                        text: "James vira servo da Sombra.",
                        status: "FINAL TR√ÅGICO DE AMIZADE",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    94: {
                        text: "Salva James com Patronum forte.",
                        choices: [
                            { text: "Continuar juntos", next: 90 },
                            { text: "Ele buscar ajuda", next: 59 }
                        ]
                    },
                    95: {
                        text: "Selado com James dentro. Culpa eterna.",
                        status: "FINAL AMARGO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    96: {
                        text: "Draco admite curiosidade e estudos.",
                        choices: [
                            { text: "Convidar para ajudar", next: 73 },
                            { text: "Mandar ficar longe", next: 97 }
                        ]
                    },
                    97: {
                        text: "Tenta ritual sozinho e falha possu√≠do.",
                        choices: [
                            { text: "Tentar salvar", next: 94 },
                            { text: "Selar com ele dentro", next: 95 }
                        ]
                    },
                    98: {
                        text: "Luz de Rowena refor√ßa o selo sozinha.",
                        status: "FINAL M√ÅGICO ANTIGO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    99: {
                        text: "Sombra banida via uni√£o das Casas.",
                        status: "FINAL √âPICO E CAN√îNICO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    },
                    100: {
                        text: "Crep√∫sculo eterno via trai√ß√£o final.",
                        status: "FINAL TRA√çDO",
                        choices: [{ text: "RECOME√áAR", next: 'RESET', class: 'end-btn' }]
                    }
                }
            }
        }
    };

    // As se√ß√µes do Lago Negro j√° est√£o inclu√≠das no objeto principal 'allAdventures.lago_negro.sections'.
    // N√£o √© necess√°rio popul√°-las novamente aqui.

    let currentAdventureId = null;
    let gameState = {
        character: null,
        galleons: 0,
        inventory: [],
        vision: false,
        strength: 0
    };

    function showIntro(bookId) {
        currentAdventureId = bookId;
        const adv = allAdventures[bookId];

        document.getElementById('library-screen').classList.add('hidden');
        document.getElementById('intro-screen').classList.remove('hidden');

        document.getElementById('intro-title').innerText = adv.title;
        document.getElementById('intro-description').innerText = adv.description;

        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function showSelection() {
        const adv = allAdventures[currentAdventureId];
        const selectionDiv = document.getElementById('character-selection');
        selectionDiv.innerHTML = '';

        adv.characters.forEach(char => {
            const box = document.createElement('div');
            box.className = 'char-box';
            box.onclick = () => startGame(char);
            box.innerHTML = `
                <span class="char-icon">${char.icon}</span>
                <h3>${char.name}</h3>
                <p>${char.title}</p>
            `;
            selectionDiv.appendChild(box);
        });

        document.getElementById('intro-screen').classList.add('hidden');
        document.getElementById('setup-screen').classList.remove('hidden');
    }

    function startGame(char) {
        gameState.character = char;
        gameState.galleons = char.initialGalleons || 0;
        gameState.inventory = [...(char.initialInventory || [])];
        gameState.strength = char.initialStrength || 0;

        document.getElementById('setup-screen').classList.add('hidden');
        document.getElementById('game-screen').classList.remove('hidden');

        // Exibir For√ßa Interior apenas se existir no her√≥i
        if (char.initialStrength !== undefined) {
            document.getElementById('strength-display').classList.remove('hidden');
        } else {
            document.getElementById('strength-display').classList.add('hidden');
        }

        renderSection(1);
    }

    function renderSection(id) {
        if (id === 'RESET') { location.reload(); return; }

        const adv = allAdventures[currentAdventureId];
        const section = adv.sections[id];

        if (!section) {
            console.error("Se√ß√£o n√£o encontrada:", id);
            return;
        }

        const contentDiv = document.getElementById('section-content');
        const choicesDiv = document.getElementById('choices-container');

        // Ganhos autom√°ticos
        if (section.items) {
            section.items.forEach(item => {
                if (!gameState.inventory.includes(item)) gameState.inventory.push(item);
            });
        }
        if (section.galleon_loss) gameState.galleons = Math.max(0, gameState.galleons - section.galleon_loss);
        if (section.galleon_gain) gameState.galleons += section.galleon_gain;

        // Mec√¢nica de For√ßa Interior
        if (section.strength_gain) gameState.strength = Math.min(6, gameState.strength + section.strength_gain);
        if (section.strength_loss) gameState.strength = Math.max(0, gameState.strength - section.strength_loss);

        updateUI();

        contentDiv.innerHTML = section.text.replace(/\n/g, '<br>');
        if (section.status) {
            contentDiv.innerHTML += `<div style="color: var(--gold-primary); margin-top: 2rem; font-weight: bold; font-size: 1.8rem; letter-spacing: 2px; text-shadow: 0 0 15px rgba(212, 175, 55, 0.5)">${section.status}</div>`;
        }

        choicesDiv.innerHTML = '';
        section.choices.forEach(choice => {
            const btn = document.createElement('button');
            btn.className = `choice-btn ${choice.class || ''}`;

            let canChoose = true;

            // Requisitos de Item
            if (choice.requires && !choice.requires.includes('STRENGTH:')) {
                if (!gameState.inventory.includes(choice.requires)) canChoose = false;
            }

            // Requisitos de For√ßa Interior
            if (choice.requires && choice.requires.includes('STRENGTH:')) {
                const reqVal = parseInt(choice.requires.split(':')[1]);
                if (gameState.strength < reqVal) canChoose = false;
            }

            btn.innerHTML = choice.text;
            if (!canChoose) {
                btn.classList.add('disabled');
                const reqLabel = choice.requires.includes('STRENGTH:') ? `For√ßa Interior ${choice.requires.split(':')[1]}` : choice.requires;
                btn.innerHTML += ` <span class="req-hint">(Requer: ${reqLabel})</span>`;
            } else {
                btn.onclick = () => {
                    if (choice.item_loss) {
                        choice.item_loss.forEach(i => {
                            const idx = gameState.inventory.indexOf(i);
                            if (idx > -1) gameState.inventory.splice(idx, 1);
                        });
                    }
                    renderSection(choice.next);
                };
            }
            choicesDiv.appendChild(btn);
        });
    }

    function updateUI() {
        document.getElementById('galleon-count').innerText = gameState.galleons;
        document.getElementById('strength-count').innerText = gameState.strength;
        const invList = document.getElementById('inventory-list');
        invList.innerHTML = '';
        gameState.inventory.forEach(item => {
            const li = document.createElement('li');
            li.innerText = item;
            invList.appendChild(li);
        });
    }
</script>

        </main>

        <footer
            style="text-align: center; margin-top: 4rem; color: var(--text-muted); font-size: 0.9rem; padding-bottom: 2rem;">
            <p>&copy; 2025 Wiki M√°gica. Feito com Feiti√ßaria e Python.</p>
            <p style="margin-top: 0.5rem; display: flex; align-items: center; justify-content: center; gap: 5px;">
                By
                <a href="https://www.instagram.com/higorstattoo" target="_blank"
                    style="color: inherit; text-decoration: none; display: flex; align-items: center; gap: 5px;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        viewBox="0 0 16 16" style="vertical-align: middle;">
                        <path
                            d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.282.11-.705.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z" />
                    </svg>
                    @higorstattoo
                </a>
            </p>
        </footer>
    </div>

    <script>
        function createMagicEffect(type = 'spark') {
            const container = document.getElementById('particles');
            if (!container) return;

            const particle = document.createElement('div');
            particle.style.position = 'absolute';
            particle.style.pointerEvents = 'none';
            particle.style.borderRadius = '50%';
            particle.style.zIndex = '-1';

            let size, x, y, duration, animation;

            if (type === 'spark') {
                size = Math.random() * 2 + 1;
                x = Math.random() * window.innerWidth;
                y = window.innerHeight + 10;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.background = 'rgba(212, 175, 55, 0.6)';
                particle.style.boxShadow = '0 0 8px rgba(212, 175, 55, 0.8)';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';

                duration = Math.random() * 3000 + 2000;
                animation = particle.animate([
                    { transform: 'translateY(0) scale(1)', opacity: 1 },
                    { transform: `translateY(-${window.innerHeight + 50}px) scale(0)`, opacity: 0 }
                ], { duration: duration, easing: 'ease-out' });

            } else if (type === 'firefly') {
                size = Math.random() * 3 + 2;
                x = Math.random() * window.innerWidth;
                y = Math.random() * window.innerHeight;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.background = 'rgba(255, 230, 100, 0.8)';
                particle.style.boxShadow = '0 0 15px rgba(255, 220, 0, 1)';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';

                duration = Math.random() * 10000 + 5000;
                const driftX = (Math.random() - 0.5) * 200;
                const driftY = (Math.random() - 0.5) * 200;

                animation = particle.animate([
                    { transform: 'translate(0, 0) scale(1)', opacity: 0 },
                    { transform: `translate(${driftX / 2}px, ${driftY / 2}px) scale(1.2)`, opacity: 0.8, offset: 0.5 },
                    { transform: `translate(${driftX}px, ${driftY}px) scale(0.5)`, opacity: 0 }
                ], { duration: duration, easing: 'ease-in-out' });

            } else if (type === 'rare') {
                // O Pomo de Ouro (Douratudo) passa raramente
                particle.innerHTML = '‚ú®';
                particle.style.fontSize = '1.2rem';
                particle.style.borderRadius = '0';
                particle.style.background = 'none';
                particle.style.boxShadow = 'none';
                particle.style.left = '-50px';
                particle.style.top = Math.random() * 80 + '%';

                duration = 2000; // R√°pido!
                animation = particle.animate([
                    { left: '-50px', transform: 'rotate(0deg) scale(1)' },
                    { left: '110vw', transform: 'rotate(720deg) scale(1.5)' }
                ], { duration: duration, easing: 'cubic-bezier(0.45, 0.05, 0.55, 0.95)' });
            }

            container.appendChild(particle);
            animation.onfinish = () => particle.remove();
        }

        // Loop de gera√ß√£o
        setInterval(() => {
            const rand = Math.random();
            if (rand < 0.7) {
                createMagicEffect('spark');
            } else if (rand < 0.98) {
                createMagicEffect('firefly');
            } else if (rand > 0.9995) {
                // Muito raro! (Aproximadamente 1 a cada 2000 ticks)
                createMagicEffect('rare');
            }
        }, 100); // 10 part√≠culas por segundo em m√©dia
    </script>
</body>

</html>